<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-For Integrators" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">For Integrators | Pluto</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pluto-lang.org/docs/For Integrators"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="For Integrators | Pluto"><meta data-rh="true" name="description" content="The luaconf.h in Pluto provides various battle-tested mechanisms for locking down your Pluto environments. In this article, we&#x27;ve documented some of those. If you are an integrator who needs help configuring any of this, or who wants us to implement another mechanism, feel free to contact us on GitHub."><meta data-rh="true" property="og:description" content="The luaconf.h in Pluto provides various battle-tested mechanisms for locking down your Pluto environments. In this article, we&#x27;ve documented some of those. If you are an integrator who needs help configuring any of this, or who wants us to implement another mechanism, feel free to contact us on GitHub."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://pluto-lang.org/docs/For Integrators"><link data-rh="true" rel="alternate" href="https://pluto-lang.org/docs/For Integrators" hreflang="en"><link data-rh="true" rel="alternate" href="https://pluto-lang.org/docs/For Integrators" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.80068ed9.css">
<script src="/assets/js/runtime~main.b2b180d2.js" defer="defer"></script>
<script src="/assets/js/main.cfbf4ab3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Pluto Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Pluto Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pluto</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/jASXBzdcnT" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/PlutoLang/Pluto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Introduction">What is Pluto?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Getting Started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Editor Integration">Editor Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Beginner&#x27;s Guide">Beginner&#x27;s Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/New Operators">New Operators</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/new-features">New Features</a><button aria-label="Expand sidebar category &#x27;New Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/qol-improvements">QoL Improvements</a><button aria-label="Expand sidebar category &#x27;QoL Improvements&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/runtime-environment">Runtime Environment</a><button aria-label="Expand sidebar category &#x27;Runtime Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/optimizations">Optimizations</a><button aria-label="Expand sidebar category &#x27;Optimizations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Compatibility">Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/For Integrators">For Integrators</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>For Integrators</h1>
<p>The <code>luaconf.h</code> in Pluto provides various battle-tested mechanisms for locking down your Pluto environments. In this article, we&#x27;ve documented some of those. If you are an integrator who needs help configuring any of this, or who wants us to implement another mechanism, feel free to contact us on GitHub.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="content-moderation">Content Moderation<a href="#content-moderation" class="hash-link" aria-label="Direct link to Content Moderation" title="Direct link to Content Moderation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiled-code">Compiled Code<a href="#compiled-code" class="hash-link" aria-label="Direct link to Compiled Code" title="Direct link to Compiled Code">​</a></h3>
<p>You can disable execution of compiled bytecode by defining <code>PLUTO_DISABLE_COMPILED</code> in <code>luaconf.h</code> or your build config.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-module-filters">Custom Module Filters<a href="#custom-module-filters" class="hash-link" aria-label="Direct link to Custom Module Filters" title="Direct link to Custom Module Filters">​</a></h3>
<p>You may already have filters before passing scripts to run onto Pluto, but mechanisms such as <code>dofile</code> and <code>require</code> may be used to bypass them. To help you combat this, Pluto provides <code>PLUTO_LOADFILE_HOOK</code>. For example, if you set it to <code>ContmodOnLoadfile</code> in <code>luaconf.h</code> or your build config, you only need to define that function somewhere in your code, like this:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282923"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282923"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#F92472">extern</span><span class="token plain"> </span><span class="token string" style="color:#E7DB74">&quot;C&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#F92472">bool</span><span class="token plain"> </span><span class="token function" style="color:#67D8EF">ContmodOnLoadfile</span><span class="token punctuation">(</span><span class="token keyword" style="color:#F92472">const</span><span class="token plain"> </span><span class="token keyword" style="color:#F92472">char</span><span class="token operator" style="color:#F92472">*</span><span class="token plain"> filename</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">return</span><span class="token plain"> </span><span class="token operator" style="color:#F92472">!</span><span class="token function" style="color:#67D8EF">isCodeProhibited</span><span class="token punctuation">(</span><span class="token plain">soup</span><span class="token double-colon punctuation">::</span><span class="token plain">string</span><span class="token double-colon punctuation">::</span><span class="token function" style="color:#67D8EF">fromFile</span><span class="token punctuation">(</span><span class="token plain">filename</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This requires you to use Pluto as a static library, as otherwise this linking relationship won&#x27;t work.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prevent-loading-of-binary-modules">Prevent Loading of Binary Modules<a href="#prevent-loading-of-binary-modules" class="hash-link" aria-label="Direct link to Prevent Loading of Binary Modules" title="Direct link to Prevent Loading of Binary Modules">​</a></h3>
<p>The <code>PLUTO_NO_BINARIES</code> macro can be defined to totally eliminate <code>package.loadlib</code> and any DLL/SO loading capability from the <code>require</code> function. This is helpful because <code>package.loadlib</code> can be used to bypass sandbox restrictions by manually loading symbols from a Lua/Pluto library, and the <code>require</code> function can load any Lua/Pluto C Module which may or may not provide dangerous functions. This is generally vital for any sandbox. This mechanism cannot be bypassed, since it configures Pluto to compile without support for any of the aforementioned features.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution-time-limit">Execution Time Limit<a href="#execution-time-limit" class="hash-link" aria-label="Direct link to Execution Time Limit" title="Direct link to Execution Time Limit">​</a></h2>
<p>To aid environments that have to be sandboxed, Pluto provides Execution Time Limit (ETL), which can be enabled by defining <code>PLUTO_ETL_ENABLE</code> in <code>luaconf.h</code> or your build config.</p>
<p>By default, ETL allows code to run for a total of 1 ms (1.000.000 nanos). This can be changed by overwriting <code>PLUTO_ETL_NANOS</code>.</p>
<p>Note that this is a hammer solution. If you only want to prevent stupid mistakes, Infinite Loop Prevention is a far better tool.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="infinite-loop-prevention">Infinite Loop Prevention<a href="#infinite-loop-prevention" class="hash-link" aria-label="Direct link to Infinite Loop Prevention" title="Direct link to Infinite Loop Prevention">​</a></h2>
<p>Pluto can detect infinite loops by preventing too many successive iterations. This was implemented because game threads usually force users to call some sort of <code>yield</code> mechanism to return control to the game thread. In Pluto, you specify a hard bottleneck on iterations, then you specify a function pointer which should prevent ILP within the loop it&#x27;s called in.</p>
<div class="language-pluto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282923"><div class="codeBlockTitle_Ktv7">This will produce an error due to ILP:</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pluto codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282923"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#F92472">while</span><span class="token plain"> </span><span class="token boolean" style="color:#AC80FF">true</span><span class="token plain"> </span><span class="token keyword" style="color:#F92472">do</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#F92472">end</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-pluto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282923"><div class="codeBlockTitle_Ktv7">This will not, with correct configuration:</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pluto codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282923"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#F92472">while</span><span class="token plain"> </span><span class="token boolean" style="color:#AC80FF">true</span><span class="token plain"> </span><span class="token keyword" style="color:#F92472">do</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token function" style="color:#67D8EF">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#F92472">end</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If your scheduling system calls <code>coroutine.yield</code> at least once per tick, configuring the ILP mechanism can be as simple as defining <code>PLUTO_ILP_ENABLE</code>. In any case, Pluto&#x27;s configuration file (luaconf.h) is worth a look at, especially to properly configure this feature.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This is a very simple mechanic. It has no performance overhead &amp; it&#x27;s lightweight. However, the compromise for this was coverage. This will reliably prevent most user error, however malicious users can find a way to block a thread still. For example, any forward jump will prevent the mechanism from breaking a loop. This can be exploited, so don&#x27;t rely on this for security.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vm-dumping">VM Dumping<a href="#vm-dumping" class="hash-link" aria-label="Direct link to VM Dumping" title="Direct link to VM Dumping">​</a></h2>
<p>Pluto offers an optional, configurable feature to see every instruction that is executed in the Lua VM.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h3>
<p>VM Dump can be enabled by defining <code>PLUTO_VMDUMP</code> in <code>luaconf.h</code> or your build config.</p>
<ul>
<li>To reduce noise, you can modify <code>PLUTO_VMDUMP_COND</code> to set a custom condition for when VM Dump is active. By default, the condition is <code>true</code>.</li>
<li>Although not a configuration specific to VM Dump, it should be noted that you can modify the output macros <code>lua_writestring</code> and <code>lua_writeline</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-it-looks-like">What it looks like<a href="#what-it-looks-like" class="hash-link" aria-label="Direct link to What it looks like" title="Direct link to What it looks like">​</a></h3>
<p>Given the following code:</p>
<div class="language-pluto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282923"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pluto codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282923"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#F92472">local</span><span class="token plain"> value </span><span class="token operator" style="color:#F92472">=</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">3</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#F92472">switch</span><span class="token plain"> value </span><span class="token keyword" style="color:#F92472">do</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">case</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">1</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">case</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">2</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">case</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">3</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">case</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">4</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">case</span><span class="token plain"> </span><span class="token number" style="color:#AC80FF">5</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token function" style="color:#67D8EF">print</span><span class="token punctuation">(</span><span class="token string" style="color:#E7DB74">&quot;Got 1-5.&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#F92472">break</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#F92472">default</span><span class="token operator" style="color:#F92472">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token function" style="color:#67D8EF">print</span><span class="token punctuation">(</span><span class="token string" style="color:#E7DB74">&quot;Value is greater than 5.&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#F92472">end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#74705D">-- Break jumps here.</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It will output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282923"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282923"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">VARARGPREP 0        ; prepare for 0 varargs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">LOADI      0 3      ; push 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MOVE       1 0      ; move 3 into R(A)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EQI        1 1 0    ; 3 == 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EQI        1 2 1    ; 3 == 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EQI        1 3 1    ; 3 == 3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GETTABUP   2 0 0    ; push T[&#x27;print&#x27;] for function-0x247d2882520 (T=table-0x247d29ec9c8)                                              </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">LOADK      3 1      ; push &quot;Got 1-5.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;OUTPUT&gt; Got 1-5.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CALL       2 2 1    ; call cfunc (nresults=0 nparams=0)                                                                                                              </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">JMP        13       ; offset=13 newpc=0x247d29e90d8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RETURN     1 1 1    ; return 0 value(s)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is great at deciphering obfuscated code which may be causing problems for your environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-filesystem-access">Disabling Filesystem Access<a href="#disabling-filesystem-access" class="hash-link" aria-label="Direct link to Disabling Filesystem Access" title="Direct link to Disabling Filesystem Access">​</a></h2>
<p>Define the <code>PLUTO_NO_FILESYSTEM</code> macro in either your build configuration or the <code>luaconf.h</code> file. This prevents filesystem functions from being loaded into their libraries (<code>io</code>, <code>os</code>). Pluto will also compile any filesystem-related functions to do nothing more than &quot;return 0;&quot;, so they&#x27;re essentially nullsubs. This is done to protect from any attacks utilizing <code>package.loadlib</code>, which can load a Lua/Pluto library and access any symbol. Consider defining <code>PLUTO_NO_OS_EXECUTE</code> to disable filesystem access via process APIs.</p>
<p>This affects the following functions:</p>
<ol>
<li>Every single <code>io</code> function.</li>
<li><code>os.remove</code></li>
<li><code>os.rename</code></li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Compatibility"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Compatibility</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#content-moderation" class="table-of-contents__link toc-highlight">Content Moderation</a><ul><li><a href="#compiled-code" class="table-of-contents__link toc-highlight">Compiled Code</a></li><li><a href="#custom-module-filters" class="table-of-contents__link toc-highlight">Custom Module Filters</a></li><li><a href="#prevent-loading-of-binary-modules" class="table-of-contents__link toc-highlight">Prevent Loading of Binary Modules</a></li></ul></li><li><a href="#execution-time-limit" class="table-of-contents__link toc-highlight">Execution Time Limit</a></li><li><a href="#infinite-loop-prevention" class="table-of-contents__link toc-highlight">Infinite Loop Prevention</a></li><li><a href="#vm-dumping" class="table-of-contents__link toc-highlight">VM Dumping</a><ul><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#what-it-looks-like" class="table-of-contents__link toc-highlight">What it looks like</a></li></ul></li><li><a href="#disabling-filesystem-access" class="table-of-contents__link toc-highlight">Disabling Filesystem Access</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 PlutoLang. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>