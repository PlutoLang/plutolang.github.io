"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[9058],{8453:(s,e,l)=>{l.d(e,{R:()=>o,x:()=>i});var n=l(6540);const c={},r=n.createContext(c);function o(s){const e=n.useContext(r);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function i(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(c):s.components||c:o(s.components),n.createElement(r.Provider,{value:e},s.children)}},8930:(s,e,l)=>{l.r(e),l.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>F,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"Runtime Environment/Scheduler","title":"Scheduler","description":"The scheduler class \u2014 available via require \u2014 can be used to easily set up coroutine-based cooperative multitasking.","source":"@site/docs/Runtime Environment/Scheduler.md","sourceDirName":"Runtime Environment","slug":"/Runtime Environment/Scheduler","permalink":"/docs/Runtime Environment/Scheduler","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Regex","permalink":"/docs/Runtime Environment/Regex"},"next":{"title":"Socket","permalink":"/docs/Runtime Environment/Socket"}}');var c=l(4848),r=l(8453);const o={},i=void 0,d={},a=[{value:"<code>__construct</code>",id:"__construct",level:3},{value:"<code>add</code>",id:"add",level:3},{value:"<code>addloop</code>",id:"addloop",level:3},{value:"<code>run</code>",id:"run",level:3},{value:"<code>yieldfunc</code>",id:"yieldfunc",level:3},{value:"<code>errorfunc</code>",id:"errorfunc",level:3}];function t(s){const e={code:"code",div:"div",h3:"h3",p:"p",pre:"pre",span:"span",...(0,r.R)(),...s.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(e.p,{children:["The scheduler class \u2014 available via ",(0,c.jsx)(e.code,{children:"require"})," \u2014 can be used to easily set up coroutine-based cooperative multitasking."]}),"\n",(0,c.jsx)(e.h3,{id:"__construct",children:(0,c.jsx)(e.code,{children:"__construct"})}),"\n",(0,c.jsx)(e.p,{children:"The constructor takes no arguments."}),"\n",(0,c.jsx)(e.h3,{id:"add",children:(0,c.jsx)(e.code,{children:"add"})}),"\n",(0,c.jsxs)(e.p,{children:["The ",(0,c.jsx)(e.code,{children:"add"})," method can be used to turn a function into a coroutine. The coroutine is resumed once and then added to the scheduler."]}),"\n",(0,c.jsx)(e.h3,{id:"addloop",children:(0,c.jsx)(e.code,{children:"addloop"})}),"\n",(0,c.jsxs)(e.p,{children:["The ",(0,c.jsx)(e.code,{children:"addloop"})," method is a wrapper for the ",(0,c.jsx)(e.code,{children:"add"})," method that keeps invoking the given function until it returns false."]}),"\n",(0,c.jsx)(e.h3,{id:"run",children:(0,c.jsx)(e.code,{children:"run"})}),"\n",(0,c.jsxs)(e.p,{children:["The ",(0,c.jsx)(e.code,{children:"run"})," method activates the scheduler. The scheduler resumes all coroutines and then calls its yieldfunc until either all coroutines are finished, or a coroutine throws an error \u2014 in which case it is rethrown."]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},children:[(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" scheduler "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"new"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"require"}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"pluto:scheduler"'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:") ()"})]}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"-- Make this example behave a bit better in the non-blocking WASM environment"})}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"if"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"isyieldable"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"then"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"yieldfunc "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" || "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"->"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sleep"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"})}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" loops "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"0"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"addloop"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"++"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"loops"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(loops)"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"return"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" loops "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"!="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"5"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"run"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 1"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 2"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 3"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 4"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 5"})}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"add"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"3..."'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sleep"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1000"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"2..."'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sleep"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1000"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"1..."'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sleep"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1000"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"Boom!"'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"run"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 3..."})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 2..."})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 1..."})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e Boom!"})})]})})]}),"\n",(0,c.jsx)(e.h3,{id:"yieldfunc",children:(0,c.jsx)(e.code,{children:"yieldfunc"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"yieldfunc"})," is a property on the scheduler that can be used to customize how the scheduler itself yields. By default, this is a function calling ",(0,c.jsx)(e.code,{children:"os.sleep(1)"}),"."]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},children:[(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" scheduler "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"new"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"require"}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"pluto:scheduler"'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:") ()"})]}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"-- Use coroutine.sleep instead of os.sleep in a non-blocking environment, and increase the timeout from 1 to 1000 ms (1 second)."})}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"yieldfunc "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" || "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"->"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" ("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"isyieldable"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"() "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"?"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"coroutine"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"os"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sleep"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1000"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" loops "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"0"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"addloop"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"++"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"loops"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(loops)"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"return"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" loops "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"!="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"5"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"run"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 1"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 2"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 3"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 4"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 5"})})]})})]}),"\n",(0,c.jsx)(e.h3,{id:"errorfunc",children:(0,c.jsx)(e.code,{children:"errorfunc"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"errorfunc"})," is a property on the scheduler that can optionally be set to customize how the scheduler reports errors in its coroutines. By default, this is ",(0,c.jsx)(e.code,{children:"nil"}),", in which case any coroutine errors are rethrown (via ",(0,c.jsx)(e.code,{children:"coroutine.xresume"}),")."]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},children:[(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" { scheduler } "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"require"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"*"'})]}),(0,c.jsx)(e.div,{className:"line"}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" sched "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"new"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"scheduler"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"sched"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"errorfunc "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" |"}),(0,c.jsx)(e.span,{style:{color:"#FD971F",fontStyle:"italic"},children:"err"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"| "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"->"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"do"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"debug"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"traceback"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(err)) "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"sched"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"add"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"error"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"this is urgent: fatal error"'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]})]})})]})]})}function F(s={}){const{wrapper:e}={...(0,r.R)(),...s.components};return e?(0,c.jsx)(e,{...s,children:(0,c.jsx)(t,{...s})}):t(s)}}}]);