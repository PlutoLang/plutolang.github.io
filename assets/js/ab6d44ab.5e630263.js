"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[4097],{7766:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var n=i(4848),t=i(8453);const s={sidebar_position:2},l=void 0,a={id:"Runtime Environment/IO",title:"IO",description:"This page documents the changes & additions to the io library in Pluto, which is built on top of Lua 5.4's.",source:"@site/docs/Runtime Environment/IO.md",sourceDirName:"Runtime Environment",slug:"/Runtime Environment/IO",permalink:"/docs/Runtime Environment/IO",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Coroutine",permalink:"/docs/Runtime Environment/Coroutine"},next:{title:"Math",permalink:"/docs/Runtime Environment/Math"}},o={},d=[{value:"<code>io.rename</code>",id:"iorename",level:3},{value:"<code>io.remove</code>",id:"ioremove",level:3},{value:"<code>io.copy</code>",id:"iocopy",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"<code>io.part</code>",id:"iopart",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"<code>io.isdir</code>",id:"ioisdir",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-2",level:4},{value:"<code>io.isfile</code>",id:"ioisfile",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Returns",id:"returns-3",level:4},{value:"<code>io.exists</code>",id:"ioexists",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Returns",id:"returns-4",level:4},{value:"<code>io.makedir</code>",id:"iomakedir",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Returns",id:"returns-5",level:4},{value:"<code>io.listdir</code>",id:"iolistdir",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"Returns",id:"returns-6",level:4},{value:"<code>io.makedirs</code>",id:"iomakedirs",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"<code>io.absolute</code>",id:"ioabsolute",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"Returns",id:"returns-7",level:4},{value:"<code>io.relative</code>",id:"iorelative",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"Returns",id:"returns-8",level:4},{value:"<code>io.contents</code>",id:"iocontents",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"Returns",id:"returns-9",level:4},{value:"<code>io.filesize</code>",id:"iofilesize",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"<code>io.writetime</code>",id:"iowritetime",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"Returns",id:"returns-10",level:4},{value:"<code>io.currentdir</code>",id:"iocurrentdir",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"Returns",id:"returns-11",level:4}];function c(e){const r={code:"code",em:"em",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:["This page documents the changes & additions to the ",(0,n.jsx)(r.code,{children:"io"})," library in Pluto, which is built on top of Lua 5.4's."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iorename",children:(0,n.jsx)(r.code,{children:"io.rename"})}),"\n",(0,n.jsxs)(r.p,{children:["A variant of Lua's ",(0,n.jsx)(r.code,{children:"os.rename"})," that raises an error on failure and instead has no return values."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"ioremove",children:(0,n.jsx)(r.code,{children:"io.remove"})}),"\n",(0,n.jsxs)(r.p,{children:["A variant of Lua's ",(0,n.jsx)(r.code,{children:"os.remove"})," that raises an error on failure and instead has no return values."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iocopy",children:(0,n.jsx)(r.code,{children:"io.copy"})}),"\n",(0,n.jsx)(r.p,{children:"Copy a file to another file, creating a new file if needed."}),"\n",(0,n.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n",(0,n.jsx)(r.li,{children:"A path towards the file to copy into."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A boolean indicating if the file was successfully copied."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'if io.copy("./cfg/config.txt", "./backup_cfg/config.txt") then\r\n    print("Successfully created a backup config!")\r\nelse\r\n    print("Failed to create a backup config.")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iopart",children:(0,n.jsx)(r.code,{children:"io.part"})}),"\n",(0,n.jsx)(r.p,{children:"Extracts the given part from a path."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n",(0,n.jsx)(r.li,{children:'The part to return, "parent" or "name".'}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-1",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"The extracted part."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'print(io.part("/path/to/foo.txt", "parent")) -- "/path/to"\r\nprint(io.part("/path/to/foo.txt", "name")) -- "foo.txt"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"ioisdir",children:(0,n.jsx)(r.code,{children:"io.isdir"})}),"\n",(0,n.jsx)(r.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-2",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A boolean indicating if the path led toward a directory."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'local path = "./dir/main/"\r\nlocal bool = io.isdir(path)\r\nif bool then\r\n    print("Directory!")\r\nelse\r\n    print("Not a directory!")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"ioisfile",children:(0,n.jsx)(r.code,{children:"io.isfile"})}),"\n",(0,n.jsx)(r.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-3",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A boolean indicating if the path led towards a file."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'local path = "./isfile/file"\r\nlocal bool = io.isfile(path)\r\nif bool then\r\n    print("File!")\r\nelse\r\n    print("Not a file!")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"ioexists",children:(0,n.jsx)(r.code,{children:"io.exists"})}),"\n",(0,n.jsx)(r.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-4",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A boolean indicating if the path led towards an existing file or directory."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'if io.exists("cfg/config.txt") then\r\n    print("Config exists!")\r\nelse\r\n    print("Config does not exist!")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iomakedir",children:(0,n.jsx)(r.code,{children:"io.makedir"})}),"\n",(0,n.jsx)(r.p,{children:"Create a directory."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"The path for the new directory."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-5",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A boolean indicating if the directory was successfully created."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'if io.makedir("./cfg") then\r\n    print("Created cfg directory.")\r\nelse\r\n    print("Failed to create cfg directory.")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iolistdir",children:(0,n.jsx)(r.code,{children:"io.listdir"})}),"\n",(0,n.jsx)(r.p,{children:"List all the files within a directory."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path to the directory."}),"\n",(0,n.jsx)(r.li,{children:"A boolean indicating whether or not to recurse sub-directories."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-6",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"An index-based table containing file paths."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'for _, filepath in io.listdir(".") do\r\n    print(filepath)\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iomakedirs",children:(0,n.jsx)(r.code,{children:"io.makedirs"})}),"\n",(0,n.jsx)(r.p,{children:"Creates a directory and all the non-existing parent directories in the given path."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"The string path for your new directory."}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'io.makedirs("A/B/C") -- Creates "C:\\Users\\Username\\Desktop\\Project\\A\\B\\C"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"ioabsolute",children:(0,n.jsx)(r.code,{children:"io.absolute"})}),"\n",(0,n.jsx)(r.p,{children:"Convert a relative path into an absolute one."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n",(0,n.jsx)(r.li,{children:"An optional bool if the path should be canonicalized. A canonical path does not go through symlinks."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-7",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A string representing the new file path."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'io.absolute("cfg/cfg.txt") -- "C:\\Users\\Username\\Desktop\\Project\\cfg\\cfg.txt"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iorelative",children:(0,n.jsx)(r.code,{children:"io.relative"})}),"\n",(0,n.jsx)(r.p,{children:"Convert an absolute path into a relative one."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-8",children:"Returns"}),"\n",(0,n.jsx)(r.p,{children:"A string representing the new file path."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'io.relative(io.absolute("cfg/cfg.txt")) -- "cfg\\cfg.txt"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iocontents",children:(0,n.jsx)(r.code,{children:"io.contents"})}),"\n",(0,n.jsx)(r.p,{children:"Get or set a file's contents."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n",(0,n.jsxs)(r.li,{children:["The desired content. If this parameter is absent, this function works as a ",(0,n.jsx)(r.em,{children:"getter."})]}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-9",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["If this function is acting as a ",(0,n.jsx)(r.em,{children:"getter"}),", it will return the file's contents or ",(0,n.jsx)(r.code,{children:"nil"})," if there was an error."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'local text = io.contents("foo.txt") or ""\r\ntext ..= "bar"\r\nio.contents("foo.txt", text)\n'})}),"\n",(0,n.jsxs)(r.p,{children:["This function is not only easier to use than the traditional ",(0,n.jsx)(r.code,{children:"io.open"})," approach, it also performs significantly better."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iofilesize",children:(0,n.jsx)(r.code,{children:"io.filesize"})}),"\n",(0,n.jsx)(r.p,{children:"Fetch the size of a file in bytes."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'if io.filesize("cfg/config.txt") <= 1 then\r\n    print("Config is too small or empty.")\r\nend\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iowritetime",children:(0,n.jsx)(r.code,{children:"io.writetime"})}),"\n",(0,n.jsx)(r.p,{children:"Get or set a file's modification time."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsx)(r.li,{children:"A string path or file stream."}),"\n",(0,n.jsxs)(r.li,{children:["The desired timestamp. If this parameter is absent, this function works as a ",(0,n.jsx)(r.em,{children:"getter."})]}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-10",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["If this function is acting as a ",(0,n.jsx)(r.em,{children:"getter"}),", it will return the file's last write time as seconds since the UNIX epoch."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'local time = io.writetime("foo.txt")\r\ntime += 3600\r\nio.writetime("foo.txt", time)\n'})}),"\n",(0,n.jsx)(r.p,{children:'This example adds an hour (= 60 minutes = 3600 seconds) to the last write time of "foo.txt" (or errors if that file does not exist).'}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"iocurrentdir",children:(0,n.jsx)(r.code,{children:"io.currentdir"})}),"\n",(0,n.jsx)(r.p,{children:"Get or set the current working directory."}),"\n",(0,n.jsx)(r.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["A path to the desired current working directory. If this parameter is absent, this function works as a ",(0,n.jsx)(r.em,{children:"getter."})]}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"returns-11",children:"Returns"}),"\n",(0,n.jsxs)(r.p,{children:["If this function is acting as a ",(0,n.jsx)(r.em,{children:"getter"}),", it will return the current working directory."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-pluto",children:'local cwd = io.currentdir() -- Get cwd\r\nio.currentdir("abc/abc") -- Set a new cwd\n'})})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,r,i)=>{i.d(r,{R:()=>l,x:()=>a});var n=i(6540);const t={},s=n.createContext(t);function l(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);