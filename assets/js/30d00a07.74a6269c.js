"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[664],{2936:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});var t=s(4848),l=s(8453);const a={sidebar_position:1},r=void 0,i={id:"New Features/Switch Blocks",title:"Switch Blocks",description:"Switch blocks consists of the following new keywords:",source:"@site/docs/New Features/Switch Blocks.md",sourceDirName:"New Features",slug:"/New Features/Switch Blocks",permalink:"/docs/New Features/Switch Blocks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"String Interpolation",permalink:"/docs/New Features/String Interpolation"},next:{title:"Ternary Expressions",permalink:"/docs/New Features/Ternary Expressions"}},c={},o=[{value:"Switch Statement",id:"switch-statement",level:2},{value:"Try It Yourself",id:"try-it-yourself",level:4},{value:"Case Blocks",id:"case-blocks",level:2},{value:"Switch Expression",id:"switch-expression",level:2},{value:"Try It Yourself",id:"try-it-yourself-1",level:4},{value:"Try It Yourself",id:"try-it-yourself-2",level:4},{value:"Using Compatibility Mode?",id:"using-compatibility-mode",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Switch blocks consists of the following new keywords:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"case"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"switch"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"default"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"switch-statement",children:"Switch Statement"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local value = 1\nswitch value do\n    case 1:\n        print("There is only one!")\n        break\n    case 2:\n        print("There is only two!")\n        break\nend\n-- Break jumps here.\n'})}),"\n",(0,t.jsx)(n.p,{children:"Switch statements also support fallthrough."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local value = 1\nswitch value do\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n        print("Got 1-5.")\n        break\n    default:\n        print("Value is greater than 5.")\nend\n-- Break jumps here.\n'})}),"\n",(0,t.jsx)(n.p,{children:"In this example, cases 1-4 fall through to case 5."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Remember to use break whenever you do not want fallthrough"}),". Here is an example of a potential bug:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local value = 1\nswitch value do\n    case 1:\n        print("There is only one!")\n    case 2:\n        print("There is only two!")\nend\n\n-- Output:\n--  There is only one!\n--  There is only two! <-- Uh oh.\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"default"})," case is executed if none of the other cases are true. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local value = 1\nswitch value do\n    case 2:\n    case 3:\n        break\n\n    default:\n        print("Value is neither 2 nor 3!")\nend\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"default"})," case can be placed anywhere in the block. It also supports fallthrough, so remember to use ",(0,t.jsx)(n.code,{children:"break"})," if you place it above any cases."]}),"\n",(0,t.jsx)(n.h4,{id:"try-it-yourself",children:(0,t.jsx)(n.a,{href:"https://pluto-lang.org/web/#code=local%20value%20%3D%203%0D%0Aswitch%20value%20do%0D%0A%20%20case%201%3A%0D%0A%20%20case%202%3A%0D%0A%20%20case%203%3A%0D%0A%20%20case%204%3A%0D%0A%20%20case%205%3A%0D%0A%20%20%20%20print%20%22Got%201-5.%22%0D%0A%20%20%20%20break%0D%0A%20%20default%3A%0D%0A%20%20%20%20print%20%22Value%20is%20greater%20than%205.%22%0D%0Aend%0D%0A--%20Break%20jumps%20here.",children:"Try It Yourself"})}),"\n",(0,t.jsx)(n.h2,{id:"case-blocks",children:"Case Blocks"}),"\n",(0,t.jsx)(n.p,{children:"Any expression can be used for the case condition:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'switch true do\n    case 42 == 42:\n        print("42 is 42 is true")\n        break\nend\n'})}),"\n",(0,t.jsx)(n.p,{children:"There is a short-hand fallthrough syntax:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'switch value do\n    case 1, 2, 3:\n        print("1-3")\n        break\n    case 4, 5, 6:\n        print("4-6")\n        break\nend\n'})}),"\n",(0,t.jsx)(n.p,{children:"However, note that method calls needs to be encapsulated with parentheses:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local t = {\n    function getVal()\n        return 42\n    end\n}\nswitch 42 do\n// ERROR:\n    case t:getVal(): -- This is interpreted as case t: getVal():print...\n// ERROR:\n        print("val is 42")\n// ERROR:\n        break\n    case (t:getVal()):\n        print("val is 42")\n        break\nend\n'})}),"\n",(0,t.jsx)(n.h2,{id:"switch-expression",children:"Switch Expression"}),"\n",(0,t.jsx)(n.p,{children:"Just like ternary expressions, these allow you to conditionally provide values, with massively simplified case blocks:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local place = 1\nplace = switch place do\n    case 1 -> "1st"\n    case 2 -> "2nd"\n    case 3 -> "3rd"\n    default -> $"{place}th"\nend\nprint(place) --\x3e 1st\n'})}),"\n",(0,t.jsx)(n.p,{children:"Note that the case blocks here have their conditions delimited by an arrow (->) instead of a colon (:)."}),"\n",(0,t.jsx)(n.h4,{id:"try-it-yourself-1",children:(0,t.jsx)(n.a,{href:"https://pluto-lang.org/web/#code=local%20place%20%3D%201%0D%0Aplace%20%3D%20switch%20place%20do%0D%0A%20%20%20%20case%201%20-%3E%20%221st%22%0D%0A%20%20%20%20case%202%20-%3E%20%222nd%22%0D%0A%20%20%20%20case%203%20-%3E%20%223rd%22%0D%0A%20%20%20%20default%20-%3E%20%24%22%7Bplace%7Dth%22%0D%0Aend%0D%0Aprint(place)",children:"Try It Yourself"})}),"\n",(0,t.jsx)(n.p,{children:"Despite not being able to manually fall through, the shorthand fallthrough syntax still works:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-pluto",children:'local function print_range(value)\n    print(switch value do\n        case 1, 2, 3 -> "1-3"\n        case 4, 5, 6 -> "4-6"\n    end)\nend\nprint_range(1) --\x3e 1-3\nprint_range(6) --\x3e 4-6\nprint_range(9) --\x3e nil\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Notice how the ",(0,t.jsx)(n.code,{children:"default"})," case was omitted in this example, so it was implicitly set to ",(0,t.jsx)(n.code,{children:"default -> nil"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"try-it-yourself-2",children:(0,t.jsx)(n.a,{href:"https://pluto-lang.org/web/#code=local%20function%20print_range(value)%0D%0A%20%20%20%20print(switch%20value%20do%0D%0A%20%20%20%20%20%20%20%20case%201%2C%202%2C%203%20-%3E%20%221-3%22%0D%0A%20%20%20%20%20%20%20%20case%204%2C%205%2C%206%20-%3E%20%224-6%22%0D%0A%20%20%20%20end)%0D%0Aend%0D%0Aprint_range(1)%20--%3E%20%221-3%22%0D%0Aprint_range(6)%20--%3E%20%224-6%22%0D%0Aprint_range(9)%20--%3E%20nil",children:"Try It Yourself"})}),"\n",(0,t.jsx)(n.h2,{id:"using-compatibility-mode",children:"Using Compatibility Mode?"}),"\n",(0,t.jsxs)(n.p,{children:["You may need to use ",(0,t.jsx)(n.code,{children:"pluto_switch"})," instead of ",(0,t.jsx)(n.code,{children:"switch"}),". Alternatively, ",(0,t.jsx)(n.code,{children:"pluto_use switch"})," will enable the keyword independently of environment settings."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const l={},a=t.createContext(l);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);