"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[7370],{3058:(e,l,s)=>{s.r(l),s.d(l,{assets:()=>t,contentTitle:()=>i,default:()=>F,frontMatter:()=>c,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"New Features/Table Freezing","title":"Table Freezing","description":"Table freezing irreversibly and permanently forbids any future modifications to a given table.","source":"@site/docs/New Features/Table Freezing.md","sourceDirName":"New Features","slug":"/New Features/Table Freezing","permalink":"/docs/New Features/Table Freezing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Safe Navigation","permalink":"/docs/New Features/Safe Navigation"},"next":{"title":"Try-Catch Statement","permalink":"/docs/New Features/Try-Catch Statement"}}');var r=s(4848),o=s(8453);const c={sidebar_position:2},i=void 0,t={},a=[{value:"What will this prevent?",id:"what-will-this-prevent",level:3}];function d(e){const l={admonition:"admonition",code:"code",div:"div",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.p,{children:"Table freezing irreversibly and permanently forbids any future modifications to a given table."}),"\n",(0,r.jsxs)(l.p,{children:["Note that table freezing is an optional feature that has to be compiled in by defining the ",(0,r.jsx)(l.code,{children:"PLUTO_ENABLE_TABLE_FREEZING"})," macro in luaconf.h or your build config."]}),"\n",(0,r.jsx)(l.p,{children:"When enabled, it adds the following C APIs:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.code,{children:"lua_freezetable(L, idx)"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.code,{children:"lua_istablefrozen(L, idx)"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.code,{children:"lua_erriffrozen(L, idx)"})}),"\n"]}),"\n",(0,r.jsx)(l.p,{children:"and table library functions:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.code,{children:"table.isfrozen"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.code,{children:"table.freeze"})}),"\n"]}),"\n",(0,r.jsxs)(l.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",title:"Disallowing any edits to the global environment table",children:[(0,r.jsx)(l.div,{className:"code-title",children:"Disallowing any edits to the global environment table"}),(0,r.jsx)(l.div,{className:"language-id",children:"pluto"}),(0,r.jsx)(l.div,{className:"code-container",children:(0,r.jsxs)(l.code,{children:[(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"table"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"freeze"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"_G"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,r.jsx)(l.div,{className:"line"}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"_G"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"string "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {} "}),(0,r.jsx)(l.span,{style:{color:"#88846F"},children:"-- attempt to modify frozen table."})]})]})})]}),"\n",(0,r.jsxs)(l.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",title:"Creating a constant local that's associated with a frozen table",children:[(0,r.jsx)(l.div,{className:"code-title",children:"Creating a constant local that's associated with a frozen table"}),(0,r.jsx)(l.div,{className:"language-id",children:"pluto"}),(0,r.jsx)(l.div,{className:"code-container",children:(0,r.jsxs)(l.code,{children:[(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"local"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Frozen "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"<const>"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"table"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"freeze"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"({ "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"2"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"3"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" })"})]}),(0,r.jsx)(l.div,{className:"line"}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"Frozen "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" {} "}),(0,r.jsx)(l.span,{style:{color:"#88846F"},children:"-- attempt to reassign constant."})]}),(0,r.jsx)(l.div,{className:"line"}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"Frozen["}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"new value"'}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#88846F"},children:"-- attempt to modify frozen table."})]}),(0,r.jsx)(l.div,{className:"line"}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"rawset"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"(Frozen"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"key"'}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"value"'}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:") "}),(0,r.jsx)(l.span,{style:{color:"#88846F"},children:"-- attempt to modify frozen table."})]})]})})]}),"\n",(0,r.jsxs)(l.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",title:"Trying to swap the value with the debug library",children:[(0,r.jsx)(l.div,{className:"code-title",children:"Trying to swap the value with the debug library"}),(0,r.jsx)(l.div,{className:"language-id",children:"pluto"}),(0,r.jsx)(l.div,{className:"code-container",children:(0,r.jsxs)(l.code,{children:[(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"local"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" Frozen "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"<const>"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"table"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"freeze"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"({ "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"2"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"3"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" })"})]}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"for"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" i "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"249"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"do"})]}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"local"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" name"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" value "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"debug"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"getlocal"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" i)"})]}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"if"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" name "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"=="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"Frozen"'}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"then"})]}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"    "}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"debug"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:"."}),(0,r.jsx)(l.span,{style:{color:"#66D9EF"},children:"setlocal"}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"("}),(0,r.jsx)(l.span,{style:{color:"#AE81FF"},children:"1"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" i"}),(0,r.jsx)(l.span,{style:{color:"#9F570F"},children:","}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" { ["}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"key"'}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"] "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"="}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" "}),(0,r.jsx)(l.span,{style:{color:"#E6DB74"},children:'"hello world"'}),(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:" }) "}),(0,r.jsx)(l.span,{style:{color:"#88846F"},children:"-- attempt to modify local variable with a frozen table."})]}),(0,r.jsxs)(l.div,{className:"line",children:[(0,r.jsx)(l.span,{style:{color:"#F8F8F2"},children:"  "}),(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"end"})]}),(0,r.jsx)(l.div,{className:"line",children:(0,r.jsx)(l.span,{style:{color:"#F92672"},children:"end"})})]})})]}),"\n",(0,r.jsx)(l.h3,{id:"what-will-this-prevent",children:"What will this prevent?"}),"\n",(0,r.jsxs)(l.p,{children:["All modifications to the table from within the Lua environment will be prevented, including those from the ",(0,r.jsx)(l.code,{children:"debug"})," library."]}),"\n",(0,r.jsx)(l.admonition,{type:"caution",children:(0,r.jsxs)(l.p,{children:["If you're going to use this for a sandbox, ensure you call ",(0,r.jsx)(l.code,{children:"table.freeze"})," before any users can access the Lua environment, otherwise they can replace that function."]})})]})}function F(e={}){const{wrapper:l}={...(0,o.R)(),...e.components};return l?(0,r.jsx)(l,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,l,s)=>{s.d(l,{R:()=>c,x:()=>i});var n=s(6540);const r={},o=n.createContext(r);function c(e){const l=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function i(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(o.Provider,{value:l},e.children)}}}]);