"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[4566],{1726:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>a,contentTitle:()=>i,default:()=>F,frontMatter:()=>r,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"New Features/Safe Navigation","title":"Safe Navigation","description":"For Member Access","source":"@site/docs/New Features/Safe Navigation.md","sourceDirName":"New Features","slug":"/New Features/Safe Navigation","permalink":"/docs/New Features/Safe Navigation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Preprocessing","permalink":"/docs/New Features/Preprocessing"},"next":{"title":"Table Freezing","permalink":"/docs/New Features/Table Freezing"}}');var c=l(4848),o=l(8453);const r={sidebar_position:2},i=void 0,a={},t=[{value:"For Member Access",id:"for-member-access",level:2},{value:"For Method Calls",id:"for-method-calls",level:2}];function d(e){const s={admonition:"admonition",code:"code",div:"div",h2:"h2",p:"p",pre:"pre",span:"span",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h2,{id:"for-member-access",children:"For Member Access"}),"\n",(0,c.jsxs)(s.p,{children:["Accessing deeply nested fields which can potentially be ",(0,c.jsx)(s.code,{children:"nil"}),' was problematic, because you\'d need an unreasonable amount of guard clauses to prevent an "attempt to index nil" error. Pluto now offers this syntax:']}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},showlinenumbers:"true",title:"Basic Usage",children:[(0,c.jsx)(s.div,{className:"code-title",children:"Basic Usage"}),(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" person "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" {"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    name "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#E6DB74"},children:'"Alice"'})]}),(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"}"})}),(0,c.jsx)(s.div,{className:"line"}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" pet_name "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" person"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"pet"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"name"})]})]})})]}),"\n",(0,c.jsxs)(s.p,{children:["In this example, ",(0,c.jsx)(s.code,{children:"person.pet"}),' is nil. However, this does not throw an "attempt to index nil" error. ',(0,c.jsx)(s.code,{children:"pet_name"})," is simply set to ",(0,c.jsx)(s.code,{children:"nil"}),"."]}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},showlinenumbers:"true",title:"Practical Usage",children:[(0,c.jsx)(s.div,{className:"code-title",children:"Practical Usage"}),(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsxs)(s.code,{children:[(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"-- Pretend userConfig is parsed from a JSON file, or something."})}),(0,c.jsx)(s.div,{className:"line"}),(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"--- Returning the user's preferred color, or Red if they have no preferred color."})}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#A6E22E"},children:"get_color"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"return"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" userConfig"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"colors"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"preferred "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"??"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#E6DB74"},children:'"Red"'})]}),(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"end"})}),(0,c.jsx)(s.div,{className:"line"}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"get_color"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"())"})]})]})})]}),"\n",(0,c.jsxs)(s.p,{children:["In this example, we also use the null coalescing operator ",(0,c.jsx)(s.code,{children:"??"}),"."]}),"\n",(0,c.jsxs)(s.admonition,{type:"info",children:[(0,c.jsxs)(s.p,{children:["These cannot be used for statements, like ",(0,c.jsx)(s.code,{children:"a?.b?.c = 0"}),". They're only valid as expressions."]}),(0,c.jsx)(s.p,{children:"Safe Navigation (for member access) was written by Sven Olsen."})]}),"\n",(0,c.jsx)(s.h2,{id:"for-method-calls",children:"For Method Calls"}),"\n",(0,c.jsx)(s.p,{children:"Similarly, if you want to have optional hook functions, you can use safe method calls instead of writing conditionals:"}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},showlinenumbers:"true",title:"Lua Way",children:[(0,c.jsx)(s.div,{className:"code-title",children:"Lua Way"}),(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"if"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#FD971F"},children:"self"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"onEvent "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"then"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(s.span,{style:{color:"#FD971F"},children:"self"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"onEvent"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(event)"})]}),(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"end"})})]})})]}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},showlinenumbers:"true",title:"Pluto Way",children:[(0,c.jsx)(s.div,{className:"code-title",children:"Pluto Way"}),(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsx)(s.code,{children:(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#FD971F"},children:"self"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"onEvent"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(event)"})]})})})]}),"\n",(0,c.jsxs)(s.p,{children:["You can also check if the left-hand side of ",(0,c.jsx)(s.code,{children:":"})," is not nil:"]}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},showlinenumbers:"true",children:[(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"object"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?:"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"onEvent"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(event) "}),(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"-- 'object' may be nil"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"object"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?:"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"onEvent"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(event) "}),(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"-- 'object' and 'object.onEvent' may be nil"})]})]})})]}),"\n",(0,c.jsx)(s.p,{children:"Note that this feature will truncate multiple return values if they're not used as part of a fixed assignment:"}),"\n",(0,c.jsxs)(s.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},children:[(0,c.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(s.div,{className:"code-container",children:(0,c.jsxs)(s.code,{children:[(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#A6E22E"},children:"myfunc"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"return"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#AE81FF"},children:"1"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#AE81FF"},children:"2"})]}),(0,c.jsx)(s.div,{className:"line",children:(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"end"})}),(0,c.jsx)(s.div,{className:"line"}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" a"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" b"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" c "}),(0,c.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"_G"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"myfunc"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(a"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" b"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:" c) "}),(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"--\x3e 1   2   nil"})]}),(0,c.jsx)(s.div,{className:"line"}),(0,c.jsxs)(s.div,{className:"line",children:[(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"_G"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(s.span,{style:{color:"#66D9EF"},children:"myfunc"}),(0,c.jsx)(s.span,{style:{color:"#9F570F"},children:"?"}),(0,c.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()) "}),(0,c.jsx)(s.span,{style:{color:"#88846F"},children:"--\x3e 1"})]})]})})]})]})}function F(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},8453:(e,s,l)=>{l.d(s,{R:()=>r,x:()=>i});var n=l(6540);const c={},o=n.createContext(c);function r(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);