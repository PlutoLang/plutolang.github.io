"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[5891],{5711:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"Packages","title":"Packages","description":"This document will explain how external libraries are handled in Pluto and give some recommendations for their usage.","source":"@site/docs/Packages.md","sourceDirName":".","slug":"/Packages","permalink":"/docs/Packages","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"String Preallocation","permalink":"/docs/Optimizations/String Preallocation"},"next":{"title":"Compatibility","permalink":"/docs/Compatibility"}}');var o=l(4848),r=l(8453);const i={sidebar_position:10},c=void 0,t={},a=[{value:"How <code>require</code> locates files",id:"how-require-locates-files",level:2},{value:"An approach to package management",id:"an-approach-to-package-management",level:2},{value:"Noteworthy packages for Pluto",id:"noteworthy-packages-for-pluto",level:2}];function d(e){const s={a:"a",code:"code",div:"div",h2:"h2",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.p,{children:"This document will explain how external libraries are handled in Pluto and give some recommendations for their usage."}),"\n",(0,o.jsxs)(s.h2,{id:"how-require-locates-files",children:["How ",(0,o.jsx)(s.code,{children:"require"})," locates files"]}),"\n",(0,o.jsxs)(s.p,{children:["By default, ",(0,o.jsx)(s.code,{children:"require"})," only checks the installation directory and current working directory for a matching file or an ",(0,o.jsx)(s.code,{children:"init"})," file in a subfolder matching the requested name."]}),"\n",(0,o.jsxs)(s.p,{children:["So, if you want to ",(0,o.jsx)(s.code,{children:"require"})," a file in the same working directory, e.g. ",(0,o.jsx)(s.code,{children:"mylib"}),", it has to be in one of these places:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"./mylib.lua"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"./mylib/init.lua"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"./mylib.pluto"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"./mylib/init.pluto"})}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Notably, there is no standardized ",(0,o.jsx)(s.code,{children:"lib"})," or ",(0,o.jsx)(s.code,{children:"modules"})," folder. However, you can update ",(0,o.jsx)(s.code,{children:"package.path"})," to check such folders as well:"]}),"\n",(0,o.jsxs)(s.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",children:[(0,o.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,o.jsx)(s.div,{className:"code-container",children:(0,o.jsx)(s.code,{children:(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"package"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"path "}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"..="}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"package"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"config["}),(0,o.jsx)(s.span,{style:{color:"#AE81FF"},children:"3"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:".."}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"lib"'}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:".."}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"package"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"config["}),(0,o.jsx)(s.span,{style:{color:"#AE81FF"},children:"1"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:".."}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"?.pluto"'})]})})})]}),"\n",(0,o.jsxs)(s.p,{children:["With this, we could for example have ",(0,o.jsx)(s.code,{children:"mylib"})," located at ",(0,o.jsx)(s.code,{children:"./lib/mylib.pluto"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"an-approach-to-package-management",children:"An approach to package management"}),"\n",(0,o.jsx)(s.p,{children:'While it is perfectly viable to grab some pre-existing code from the internet and drop it somewhere in your project, there is often no "chain of custody", causing this code to never receive updates and making it harder to report bugs in the right place.'}),"\n",(0,o.jsxs)(s.p,{children:["Our solution for this is ",(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/apm#readme",children:"APM"}),", short for Agnostic Package Manager. It is agnostic in the sense that it can be used for non-Pluto projects and dependencies as well."]}),"\n",(0,o.jsx)(s.p,{children:"The way you use APM is by creating Pluto script that loads APM and then describes dependencies using its Pluto-based configuration format:"}),"\n",(0,o.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",title:"deps.pluto",children:[(0,o.jsx)(s.div,{className:"code-title",children:"deps.pluto"}),(0,o.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,o.jsx)(s.div,{className:"code-container",children:(0,o.jsxs)(s.code,{children:[(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:";"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"require"}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"http"'}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"request"}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"//use.agnostic.pm"'}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"|>"}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"load"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:")()"})]}),(0,o.jsx)(s.div,{className:"line"}),(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"git"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"https://github.com/PlutoLang/pluto-dns"'})]}),(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"from"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"dns.pluto"'}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"to"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"dns.pluto"'})]})]})})]}),"\n",(0,o.jsxs)(s.p,{children:["After running the ",(0,o.jsx)(s.code,{children:"deps.pluto"})," script, you will find the ",(0,o.jsx)(s.code,{children:"dns.pluto"})," file in your working directory, so you can proceed to use it:"]}),"\n",(0,o.jsxs)(s.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},norun:"true",title:"index.pluto",children:[(0,o.jsx)(s.div,{className:"code-title",children:"index.pluto"}),(0,o.jsx)(s.div,{className:"language-id",children:"pluto"}),(0,o.jsx)(s.div,{className:"code-container",children:(0,o.jsxs)(s.code,{children:[(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" dns "}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"require"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"dns"'})]}),(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"local"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" resolver "}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"="}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#F92672"},children:"new"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" dns"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"httpresolver"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,o.jsxs)(s.div,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"print"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"(resolver"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:":"}),(0,o.jsx)(s.span,{style:{color:"#66D9EF"},children:"query"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"("}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"A"'}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:","}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:" "}),(0,o.jsx)(s.span,{style:{color:"#E6DB74"},children:'"testrr-1337.soup.do"'}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:")["}),(0,o.jsx)(s.span,{style:{color:"#AE81FF"},children:"1"}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"]"}),(0,o.jsx)(s.span,{style:{color:"#9F570F"},children:"."}),(0,o.jsx)(s.span,{style:{color:"#F8F8F2"},children:"ip) "}),(0,o.jsx)(s.span,{style:{color:"#88846F"},children:"--\x3e 1.3.3.7"})]})]})})]}),"\n",(0,o.jsxs)(s.p,{children:["To later update your dependencies, simply run ",(0,o.jsx)(s.code,{children:"deps.pluto"})," again. ",(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/apm#readme",children:"Learn more..."})]}),"\n",(0,o.jsx)(s.h2,{id:"noteworthy-packages-for-pluto",children:"Noteworthy packages for Pluto"}),"\n",(0,o.jsx)(s.p,{children:"While Pluto's standard library is still growing, a few packages are available to provide what is currently missing:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/calamity-inc/iniparser",children:"iniparser"})," \u2014 INI reader & writer for Lua 5.3+ and Pluto"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/pluto-discord-bot",children:"pluto-discord-bot"})," \u2014 a library enabling you to write Discord bots in Pluto"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/pluto-websocket",children:"pluto-websocket"})," \u2014 provides WebSocket client & server functionality for Pluto's ",(0,o.jsx)(s.code,{children:"socket"})," library"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/pluto-zip",children:"pluto-zip"})," \u2014 a library to read & create zip archives"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/pluto-query",children:"pluto-query"})," \u2014 expands Pluto's ",(0,o.jsx)(s.code,{children:"xml"})," library with query selector functionality"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"https://github.com/PlutoLang/pluto-dns",children:"pluto-dns"})," \u2014 DNS client library"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,l)=>{l.d(s,{R:()=>i,x:()=>c});var n=l(6540);const o={},r=n.createContext(o);function i(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);