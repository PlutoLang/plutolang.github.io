"use strict";(self.webpackChunkpluto=self.webpackChunkpluto||[]).push([[7375],{4800:(s,e,l)=>{l.r(e),l.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>F,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"New Features/Mindex Metamethod","title":"Mindex Metamethod","description":"The mindex metamethod stands for \'method index\'. It has a secondary priority to index and it\'s only invoked when the lookup is being performed by method invocation syntax. This is used to avoid compatibility issues regarding Pluto\'s default metatable for tables. For example:","source":"@site/docs/New Features/Mindex Metamethod.md","sourceDirName":"New Features","slug":"/New Features/Mindex Metamethod","permalink":"/docs/New Features/Mindex Metamethod","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Object-Oriented Programming","permalink":"/docs/New Features/Object-Oriented Programming"},"next":{"title":"QoL Improvements","permalink":"/docs/category/qol-improvements"}}');var c=l(4848),o=l(8453);const r={},i=void 0,t={},d=[];function a(s){const e={code:"code",div:"div",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",...(0,o.R)(),...s.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(e.p,{children:["The ",(0,c.jsx)(e.code,{children:"__mindex"})," metamethod stands for 'method index'. It has a secondary priority to ",(0,c.jsx)(e.code,{children:"__index"})," and it's only invoked when the lookup is being performed by method invocation syntax. This is used to avoid compatibility issues regarding Pluto's default metatable for tables. For example:"]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai",style:{backgroundColor:"#272822",color:"#F8F8F2"},children:[(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" t "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" { "}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"a"'}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"b"'}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#E6DB74"},children:'"c"'}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" }"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"concat"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()) "}),(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e abc"})]})]})})]}),"\n",(0,c.jsx)(e.p,{children:"In this code, the following occurs:"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"concat"})," key is not directly present in the table, so ",(0,c.jsx)(e.code,{children:"__index"})," is queried."]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"__index"})," returns nil."]}),"\n",(0,c.jsxs)(e.li,{children:["Since ",(0,c.jsx)(e.code,{children:"__index"})," returned nil and this lookup is being performed by method invocation syntax (",(0,c.jsx)(e.code,{children:":"}),"), ",(0,c.jsx)(e.code,{children:"__mindex"})," is queried."]}),"\n"]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},title:"An example showing how __mindex is walked recursively so :insert still works with a custom __mindex",children:[(0,c.jsx)(e.div,{className:"code-title",children:"An example showing how __mindex is walked recursively so :insert still works with a custom __mindex"}),(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" t "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"setmetatable"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"({}"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" {"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    __mindex "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" {"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"        "}),(0,c.jsx)(e.span,{style:{color:"#66D9EF",fontStyle:"italic"},children:"function"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#A6E22E"},children:"sum"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"            "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" accum "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"0"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"            "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"for"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#FD971F"},children:"self"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"as"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" v "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"do"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"                accum "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"+="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" v"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"            "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"            "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"return"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" accum"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"        "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"end"})]}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"    }"})}),(0,c.jsx)(e.div,{className:"line",children:(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"})"})}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"insert"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"insert"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"("}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"2"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:")"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"sum) "}),(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e nil"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"sum"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()) "}),(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 3"})]})]})})]}),"\n",(0,c.jsxs)(e.pre,{className:"shiki monokai with-title",style:{backgroundColor:"#272822",color:"#F8F8F2"},title:"An example of a field taking precedence",children:[(0,c.jsx)(e.div,{className:"code-title",children:"An example of a field taking precedence"}),(0,c.jsx)(e.div,{className:"language-id",children:"pluto"}),(0,c.jsx)(e.div,{className:"code-container",children:(0,c.jsxs)(e.code,{children:[(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"local"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" t "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" { "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:","}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"2"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" }"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"min"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()) "}),(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"--\x3e 1"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:"."}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"min "}),(0,c.jsx)(e.span,{style:{color:"#F92672"},children:"="}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:" "}),(0,c.jsx)(e.span,{style:{color:"#AE81FF"},children:"1"})]}),(0,c.jsxs)(e.div,{className:"line",children:[(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"print"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"(t"}),(0,c.jsx)(e.span,{style:{color:"#9F570F"},children:":"}),(0,c.jsx)(e.span,{style:{color:"#66D9EF"},children:"min"}),(0,c.jsx)(e.span,{style:{color:"#F8F8F2"},children:"()) "}),(0,c.jsx)(e.span,{style:{color:"#88846F"},children:"-- attempt to call a number value"})]})]})})]})]})}function F(s={}){const{wrapper:e}={...(0,o.R)(),...s.components};return e?(0,c.jsx)(e,{...s,children:(0,c.jsx)(a,{...s})}):a(s)}},8453:(s,e,l)=>{l.d(e,{R:()=>r,x:()=>i});var n=l(6540);const c={},o=n.createContext(c);function r(s){const e=n.useContext(o);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function i(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(c):s.components||c:r(s.components),n.createElement(o.Provider,{value:e},s.children)}}}]);